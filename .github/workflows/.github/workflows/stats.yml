name: ğŸ“Š Update GitHub Stats

on:
  schedule:
    # Segunda-feira Ã s 08:00 (BrasÃ­lia = 11:00 UTC)
    - cron: '0 11 * * 1'
  workflow_dispatch:
  push:
    branches: [ main ]

permissions:
  contents: write

jobs:
  update-stats:
    runs-on: ubuntu-latest

    steps:
      - name: ğŸš€ Checkout do repositÃ³rio
        uses: actions/checkout@v4
        with:
          fetch-depth: 0

      - name: âš™ï¸ Configurar Git
        run: |
          git config user.name "MarcoTuliops22"
          git config user.email "marcotuliops22@gmail.com"

      - name: ğŸ“Š Gerar estatÃ­sticas do GitHub
        run: |
          cat <<EOF > STATS.md
          # ğŸ“Š EstatÃ­sticas do GitHub - Marco TÃºlio

          ## ğŸš€ Linguagens Mais Usadas
          ![Top Languages](https://github-readme-stats.vercel.app/api/top-langs/?username=MarcoTuliops22&layout=compact&theme=tokyonight&hide_border=true&langs_count=8)

          ## ğŸ“ˆ EstatÃ­sticas Gerais
          ![GitHub Stats](https://github-readme-stats.vercel.app/api?username=MarcoTuliops22&show_icons=true&theme=tokyonight&hide_border=true&count_private=true)

          ## ğŸ”¥ Streak
          ![GitHub Streak](https://streak-stats.demolab.com/?user=MarcoTuliops22&theme=tokyonight&hide_border=true)

          ---
          *Ãšltima atualizaÃ§Ã£o: $(date '+%d/%m/%Y %H:%M:%S')*
          EOF

      - name: ğŸ“¤ Commitar alteraÃ§Ãµes
        run: |
          git add STATS.md
          if git diff --cached --quiet; then
            echo "Nenhuma alteraÃ§Ã£o detectada"
          else
            git commit -m "ğŸ“Š Atualizar estatÃ­sticas automaticamente"
            git push
          fi

      - name: âœ… Finalizado
        run: echo "EstatÃ­sticas atualizadas com sucesso!"
            git push origin main || echo "Push falhou, continuando..."
          
          echo "âœ… EstatÃ­sticas atualizadas e enviadas com sucesso!"